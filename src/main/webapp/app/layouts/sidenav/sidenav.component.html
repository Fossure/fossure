<nav class="sidenav vstack gap-3" [ngClass]="isSidenavCollapsed ? 'sidenav-sm' : 'sidenav-xl'" [ngSwitch]="account !== null">
  <div class="row sidenav-toggle-btn align-self-center" (click)="toggleSidenav()">
    <div class="col"><fa-icon icon="bars"></fa-icon></div>
  </div>
  <div class="row">
    <ul class="navbar-nav">
      <li class="nav-item"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{ exact: true }"
          ngbPopover="Home"
          triggers="mouseenter:mouseleave"
          popoverClass="sidenav-popover"
          placement="end"
          container="body"
          [openDelay]="0"
          [disablePopover]="!isSidenavCollapsed!">
        <a class="nav-link" routerLink="/">
            <fa-icon icon="home"></fa-icon>
            <span>Home</span>
        </a>
      </li>
      <li *ngSwitchCase="true"
          class="nav-item"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{ exact: false }"
          ngbPopover="Projects"
          triggers="mouseenter:mouseleave"
          popoverClass="sidenav-popover"
          placement="end"
          container="body"
          [openDelay]="0"
          [disablePopover]="!isSidenavCollapsed!"
      >
        <a class="nav-link" routerLink="project">
            <fa-icon icon="sitemap"></fa-icon>
            <span>Projects</span>
        </a>
      </li>
      <li *ngSwitchCase="true" class="nav-item" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: false }"
          ngbPopover="Libraries"
          triggers="mouseenter:mouseleave"
          popoverClass="sidenav-popover"
          placement="end"
          container="body"
          [openDelay]="0"
          [disablePopover]="!isSidenavCollapsed!">
        <a class="nav-link" routerLink="library">
            <fa-icon icon="cubes"></fa-icon>
            <span>Libraries</span>
        </a>
      </li>
      <li *ngSwitchCase="true" class="nav-item" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: false }"
          ngbPopover="Licenses"
          triggers="mouseenter:mouseleave"
          popoverClass="sidenav-popover"
          placement="end"
          container="body"
          [openDelay]="0"
          [disablePopover]="!isSidenavCollapsed!">
        <a class="nav-link" routerLink="license">
            <fa-icon icon="gavel"></fa-icon>
            <span>Licenses</span>
        </a>
      </li>
      <li
        *ngSwitchCase="true"
        ngbDropdown
        dropdownClass="sidenav-dropdown"
        class="nav-item dropdown pointer"
        display="dynamic"
        routerLinkActive="active"
        [routerLinkActiveOptions]="{ exact: false }"
        ngbPopover="More"
        triggers="mouseenter:mouseleave"
        popoverClass="sidenav-popover"
        placement="end"
        container="body"
        [openDelay]="0"
        [disablePopover]="!isSidenavCollapsed!">
        <a class="nav-link dropdown-toggle" ngbDropdownToggle href="javascript:void(0);" id="entity-menu" data-cy="entity">
            <fa-icon icon="th-list"></fa-icon>
            <span>More</span>
        </a>
        <ul class="dropdown-menu" ngbDropdownMenu aria-labelledby="entity-menu">
          <li>
            <a
              class="dropdown-item"
              routerLink="license-risk"
              routerLinkActive="active"
              [routerLinkActiveOptions]="{ exact: false }"
            >
              <fa-icon icon="shield-alt" [fixedWidth]="true"></fa-icon>
              <span>License Risks</span>
            </a>
          </li>
          <li>
            <a
              class="dropdown-item"
              routerLink="requirement"
              routerLinkActive="active"
              [routerLinkActiveOptions]="{ exact: false }"
            >
              <fa-icon icon="tasks" [fixedWidth]="true"></fa-icon>
              <span>Requirements</span>
            </a>
          </li>
          <li *jhiHasAnyAuthority="['ROLE_USER', 'ROLE_ADMIN']">
            <a
              class="dropdown-item"
              routerLink="upload"
              routerLinkActive="active"
              [routerLinkActiveOptions]="{ exact: false }"
            >
              <fa-icon icon="file-upload" [fixedWidth]="true"></fa-icon>
              <span>Upload</span>
            </a>
          </li>
          <li *jhiHasAnyAuthority="['ROLE_USER', 'ROLE_ADMIN']">
            <a
              class="dropdown-item"
              routerLink="license-naming-mapping"
              routerLinkActive="active"
              [routerLinkActiveOptions]="{ exact: false }"
            >
              <fa-icon icon="compress-arrows-alt" [fixedWidth]="true"></fa-icon>
              <span>License Mapping</span>
            </a>
          </li>
          <li *jhiHasAnyAuthority="['ROLE_USER', 'ROLE_ADMIN']">
            <a
              class="dropdown-item"
              routerLink="generic-license-url"
              routerLinkActive="active"
              [routerLinkActiveOptions]="{ exact: false }"
            >
              <fa-icon icon="link" [fixedWidth]="true"></fa-icon>
              <span>Generic License URLs</span>
            </a>
          </li>
        </ul>
      </li>
      <li
        *jhiHasAnyAuthority="'ROLE_ADMIN'"
        ngbDropdown
        dropdownClass="sidenav-dropdown"
        class="nav-item dropdown pointer"
        display="dynamic"
        routerLinkActive="active"
        [routerLinkActiveOptions]="{ exact: false }"
        ngbPopover="Admin"
        triggers="mouseenter:mouseleave"
        popoverClass="sidenav-popover"
        placement="end"
        container="body"
        [openDelay]="0"
        [disablePopover]="!isSidenavCollapsed!"
      >
        <a class="nav-link dropdown-toggle" ngbDropdownToggle href="javascript:void(0);" id="admin-menu" data-cy="adminMenu">
            <fa-icon icon="users-cog"></fa-icon>
            <span>Admin</span>
        </a>
        <ul class="dropdown-menu" ngbDropdownMenu aria-labelledby="admin-menu">
          <li>
            <a class="dropdown-item" routerLink="admin/user-management" routerLinkActive="active">
              <fa-icon icon="users" [fixedWidth]="true"></fa-icon>
              <span>User management</span>
            </a>
          </li>
          <li>
            <a class="dropdown-item" routerLink="admin/metrics" routerLinkActive="active">
              <fa-icon icon="tachometer-alt" [fixedWidth]="true"></fa-icon>
              <span>Metrics</span>
            </a>
          </li>
          <li>
            <a class="dropdown-item" routerLink="admin/health" routerLinkActive="active">
              <fa-icon icon="heart" [fixedWidth]="true"></fa-icon>
              <span>Health</span>
            </a>
          </li>
          <li>
            <a class="dropdown-item" routerLink="admin/configuration" routerLinkActive="active">
              <fa-icon icon="cogs" [fixedWidth]="true"></fa-icon>
              <span>Configuration</span>
            </a>
          </li>
          <li>
            <a class="dropdown-item" routerLink="admin/logs" routerLinkActive="active">
              <fa-icon icon="tasks" [fixedWidth]="true"></fa-icon>
              <span>Logs</span>
            </a>
          </li>
          <li *ngIf="openAPIEnabled">
            <a class="dropdown-item" routerLink="admin/docs" routerLinkActive="active">
              <fa-icon icon="book" [fixedWidth]="true"></fa-icon>
              <span>API</span>
            </a>
          </li>
          <li *ngIf="!inProduction">
            <a class="dropdown-item" href="./h2-console/" target="_tab">
              <fa-icon icon="database" [fixedWidth]="true"></fa-icon>
              <span>Database</span>
            </a>
          </li>
        </ul>
      </li>
    </ul>
  </div>

  <div class="row m-0" *ngSwitchCase="true">
    <div class="col-auto profile-img"
         [ngbPopover]="profileActions"
         popoverClass="sidenav-popover sidenav-popover-profile"
         placement="end"
         container="body"
         [openDelay]="0"
         [disablePopover]="!isSidenavCollapsed!">
      {{ account?.login | firstCapitalLetter }}
    </div>
    <div class="col text-center align-self-center">
      <ng-container *ngTemplateOutlet="profileActions"></ng-container>
    </div>
  </div>

  <ng-template #profileActions>
    <div class="hstack profile-actions">
      <div class="col" routerLink="account/settings" routerLinkActive="active"><fa-icon icon="gear" routerLink="account/settings"></fa-icon></div>
      <div class="col" routerLink="account/password" routerLinkActive="active"><fa-icon icon="lock" routerLink="account/password"></fa-icon></div>
      <div class="col"><fa-icon icon="right-from-bracket" (click)="logout()" id="logout"></fa-icon></div>
    </div>
  </ng-template>

  <div class="sidenav-footer row align-items-end">
    <div>
      <a href="https://github.com/Fossure/fossure" target="_blank"><div id="logo-img"></div></a>
      <p id="logo-name" class="fw-normal">
        Fossure {{version}}<br>
        <span class="text-muted font-size-88">Made with ‚ù§ by patrickwjh</span>
      </p>
    </div>
  </div>
</nav>
